<odoo>
    <data>
        <template id="survey_fill_header" name="Survey: main page header">
            <div class="o_survey_nav pt16 mb-2">
                <div class="container m-0 p-0">
                    <div class="row">
                        <div  class="col-lg-10">
                            <h1 t-if="answer.state == 'new' or survey.questions_layout != 'page_per_question'"
                                t-esc="survey.title" class="o_survey_main_title pt-4"></h1>
                        </div>
                        <div class="o_survey_timer col-lg-2 pt-4">
                            <h1 class="o_survey_timer_container timer text-end">
                            </h1>
                        </div>
                    </div>
                </div>
                <div t-att-class="'o_survey_breadcrumb_container mt8' + (' d-none ' if answer.state != 'in_progress' else '')"
                    t-if="not survey.has_conditional_questions and survey.questions_layout == 'page_per_section' and answer.state != 'done'"
                    t-att-data-can-go-back="survey.users_can_go_back"
                    t-att-data-pages="json.dumps(breadcrumb_pages)" />
            </div>
        </template>

                <!-- Main survey template -->
        <template id="survey.survey_page_fill" name="Survey: main page (take survey)">
            <t t-call="survey.layout">
                <t t-if="answer.test_entry" t-call="survey.survey_button_form_view" />
                <div class="wrap o_survey_wrap d-flex" style="background-color: #d1e4e6;">
                    <div class="o_container_small o_survey_form d-flex flex-column mb-5">
                        <!-- <t t-call="survey.survey_fill_header" /> -->
                        <t t-call="survey.survey_fill_form" />
                    </div>
                </div>
            </t>
        </template>

        <!-- *********************************Start Survey Page******************************** -->

        <template id="survey.survey_fill_form_start" name="Survey: start form content">
            <meta charset="UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
            <style>
                .con-body {
                    background-color: #d1e4e6;
                    min-height: 100vh;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                }

                .main-card {
                    background-color: white;
                    border-radius: 0.75rem;
                    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
                    padding: 2rem;
                    width: 100%;
                    max-width: 450px;
                    min-height: 400px;
                    margin: 1rem auto;
                }

                .back-btn {
                    color: #94a3b8;
                    border: none;
                    background: transparent;
                    padding: 0;
                }

                .back-btn:hover {
                    color: #64748b;
                }

                .step-indicator {
                    color: #94a3b8;
                    font-size: 0.875rem;
                }

                .card-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                }

                .form-control {
                    margin-bottom: 1rem;
                    padding: 0.75rem;
                    font-size: 1rem;
                }

                .action-btn {
                    width: 100%;
                    background-color: #25b7d3;
                    color: white;
                    border: none;
                    padding: 0.75rem;
                    border-radius: 0.375rem;
                    margin-top: 1rem;
                    transition: background-color 0.2s;
                    font-weight: 500;
                }

                .action-btn:hover {
                    background-color: #1da1bb;
                }

                .faq-link {
                    text-align: center;
                    font-size: 0.875rem;
                    }
                    
                    .faq-link a {
                    color: #25b7d3;
                    text-decoration: none;
                    }
                    
                    .faq-link a:hover {
                    color: #1da1bb;
                    }

                .footer {
                    text-align: center;
                    padding: 1rem;
                    color: #9ca3af;
                    font-size: 0.75rem;
                    margin-top: 1rem;
                }
            </style>
            <div class="wrap o_survey_start">
                <div>
                    <t t-if="answer.is_session_answer">
                        <div class="fw-bold">
                            The session will begin automatically when the host starts.
                        </div>
                    </t>
                    <t t-else="">
                        <div t-if="survey.is_time_limited">
                            <p>
                                <span t-if="not survey.certification">Time limit for this survey: </span>
                                <span t-else="">Time limit for this certification: </span>
                                <span class="fw-bold text-danger" t-field="survey.time_limit" t-options="{'widget': 'duration', 'unit': 'minute'}"></span>
                            </p>
                        </div>
                        <div class="con-body">
                            <div class="container">
                                <div class="row justify-content-center">
                                    <div class="col-12">
                                    <!-- Main card -->
                                    <div class="main-card">
                                        <div t-if="answer.test_entry"> <h4 style="text-align:center;"> Test Questionnaire </h4> </div>
                                        <div t-elif="survey.type_of_survey == 'medical_history'"> <h4 style="text-align:center;"> Pre-Anaesthetic Questionnaire </h4> </div>
                                        <div t-elif="survey.type_of_survey == 'feedback'"> <h4 style="text-align:center;"> Post-Anaesthetic Feedback </h4> </div>
                                        <div t-else=""> <h4 t-esc="survey.title"/></div>
                                        <div t-if="survey.type_of_survey == 'medical_history'"><p style="text-align: justify; margin-top: 2rem; margin-bottom: 2rem; font-size: 18px;">To maximise safety and comfort, your anaesthetic is tailored to meet your specific needs. To do so, your anaesthetist requires important information about you. Please fill in your Pre-Anaesthetic Questionnaire as soon as possible.</p></div> 
                                        <div t-elif="survey.type_of_survey == 'feedback'"><p style="text-align: justify; margin-top: 2rem; margin-bottom: 2rem; font-size: 18px;">We hope you are recovering well! Please provide your feedback on your anaesthetic experience using this survey. If should take less than 5 minutes to complete. Your feedback is greatly appreciated!</p></div> 
                                        <div t-else=""><p style="text-align: justify; margin-top: 2rem; margin-bottom: 2rem; font-size: 18px;">To maximise safety and comfort, your anaesthetic is tailored to meet your specific needs. To do so, your anaesthetist requires important information about you. Please fill in your Pre-Anaesthetic Questionnaire as soon as possible.</p></div> 
                                        <button type="submit" value="start" class="action-btn">
                                        <t t-if="survey.type_of_survey == 'medical_history'">
                                            Start Questionnaire
                                        </t>
                                        <t t-elif="survey.type_of_survey == 'feedback'">
                                            Start Feedback
                                        </t>
                                        <t t-else="">
                                            Start Survey
                                        </t>
                                        </button>
                                        <div class="faq-link mt-5 text-center">
                                            <a href="https://vanaesa.com/" target="_blank">What is VANAESA?</a>
                                        </div>
                                    </div>
                                    <!-- Footer -->
                                    <div class="footer">
                                        Copyright Â© Synapse Medical Pte Ltd
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
        </template>

        <template id="survey.question_text_box" name="Question: free text box">
            <style>
                textarea.auto-resize {
                    overflow-y: hidden;
                    resize: none;
                    min-height: 50px;
                    max-height: 500px;
                    border-radius: 10px;
                    width: 100%;
                    transition: border-color 0.3s ease, box-shadow 0.3s ease;
                }
 
                textarea.auto-resize:focus {
                    border-color: rgb(33, 149, 172);
                    box-shadow: rgba(3, 102, 214, 0.3) 0px 0px 0px 5px;
                    outline: none;
                }
            </style>
            <div class="o_survey_comment_container h-auto p-0">
                <textarea class="auto-resize px-3 py-1" rows="2"
                        t-att-name="question.id" t-att-placeholder="question.question_placeholder"
                        t-att-data-question-type="question.question_type"><t t-if="answer_lines" t-esc="answer_lines[0].value_text_box or None"/></textarea>
            </div>
            <script>
                <![CDATA[
                    (function() {
                        function setupAutoResizeTextareas() {
                            document.querySelectorAll('.auto-resize').forEach(textarea => {
                                // Store the resize function so we can call it manually
                                function resize() {
                                    textarea.style.height = 'auto';
                                    textarea.style.height = Math.min(textarea.scrollHeight, 500) + 'px';
                                }
                                
                                // Only add event listeners if not already added
                                if (!textarea.dataset.resizeInitialized) {
                                    textarea.addEventListener('input', resize);
                                    textarea.dataset.resizeInitialized = 'true';
                                }
                                
                                // Always resize on setup (handles returning to page)
                                setTimeout(resize, 10); // Small delay to ensure DOM is ready
                            });
                        }
                        
                        // Run on initial load
                        setupAutoResizeTextareas();
                        
                        // Handle Odoo's dynamic loading
                        if (typeof odoo !== 'undefined') {
                            // Use MutationObserver for better performance than DOMNodeInserted
                            const observer = new MutationObserver(function(mutations) {
                                setupAutoResizeTextareas();
                            });
                            
                            observer.observe(document.body, {
                                childList: true,
                                subtree: true
                            });
                            
                            // Also check when Odoo finishes rendering
                            $(document).ready(function() {
                                setTimeout(setupAutoResizeTextareas, 300);
                            });
                        }
                    })();
                ]]>
            </script>
        </template>

        <template id="survey.question_char_box" name="Question: char box">
            <style> 
                .form-control {
                    margin-bottom: 1rem;
                    padding: 0.75rem;
                    font-size: 1rem;
                }
            </style>
            <div class="js_question-wrap o_survey_comment_container p-0" t-att-data-question-id="question.id">
                <t t-if="question.medic_details">
                    <input type="text" t-att-name="question.id" t-att-data-question-type="question.question_type"
                        class="form-control medicine-input"
                        placeholder="Search the medicine..."
                        t-att-value="answer_lines and answer_lines[0].value_char_box or ''"
                        t-att-id="'medicine-input-' + str(question.id)" />
                    <ul t-att-id="'medicine-suggestion-' + str(question.id)" class="list-group position-absolute mt-2" style="display: none; max-height: 150px; max-width: 400px; overflow-y: auto; z-index: 1051; background: white;">
                        <t t-foreach="request.env['res.medication'].sudo().search(['|', ('user_id', '=', request.env.user.id), ('user_id', '=', False)], limit=10)" t-as="medicine">
                            <li class="list-group-item list-group-item-action medicine-suggestion"
                                t-att-data-value="(medicine.brand_name or '') + ', ' + (medicine.name or '')" t-att-class="(answer_lines and answer_lines[0].value_char_box == ((medicine.brand_name or '') + ', ' + (medicine.name or ''))) and 'selected' or ''">
                                <t t-esc="(medicine.brand_name or '') + ', ' + (medicine.name or '')" />
                            </li>
                        </t>
                        <li class="list-group-item list-group-item-action bg-light text-primary create-new-medicine">
                            Create New
                        </li>
                    </ul>
                </t>
                <t t-else="">
                    <input t-att-type="'email' if question.validation_email else 'text'"
                        class="form-control"
                        t-att-name="question.id" t-att-placeholder="question.question_placeholder"
                        t-att-value="answer_lines[0].value_char_box if answer_lines else None"
                        t-att-data-question-type="question.question_type"
                        t-att-data-validation-length-min="question.validation_length_min if question.validation_required else False"
                        t-att-data-validation-length-max="question.validation_length_max if question.validation_required else False"/>
                </t>
            </div>
        </template>

        <template id="survey.question_numerical_box" name="Question: numerical box">
            <style> 
                .form-control {
                    margin-bottom: 1rem;
                    padding: 0.75rem;
                    font-size: 1rem;
                }
            </style>
            <div class="o_survey_answer_wrapper p-1 rounded">
                <input type="number" step="any" class="form-control"
                    t-att-name="question.id" t-att-placeholder="question.question_placeholder"
                    t-att-value="answer_lines[0].value_numerical_box if answer_lines else None"
                    t-att-data-question-type="question.question_type"
                    t-att-data-validation-float-min="question.validation_min_float_value if question.validation_required else False"
                    t-att-data-validation-float-max="question.validation_max_float_value if question.validation_required else False"/>
            </div>
        </template>

        <template id="survey.question_date" name="Question: date box">
            <style>
                .form-control {
                    margin-bottom: 1rem;
                    padding: 0.75rem;
                    font-size: 1rem;
                }

                .date-field {
                    max-width: 3rem;
                    margin-bottom: 1rem;
                    padding: 0.75rem;
                    font-size: 1rem;
                    border-top-right-radius: 5px;
                    border-bottom-right-radius: 5px;
                    cursor: pointer;
                }
            </style>
            <div class="input-group o_survey_form_date o_survey_answer_wrapper p-1 rounded">
                <input type="text" class="form-control datetimepicker-input"
                    t-att-name="question.id" t-att-placeholder="question.question_placeholder"
                    t-att-value="format_date(answer_lines[0].value_date) if answer_lines else None"
                    t-att-data-question-type="question.question_type"
                    data-widget="datetime-picker" data-widget-type="date"
                    t-att-data-min-date="question.validation_min_date"
                    t-att-data-max-date="question.validation_max_date"/>
                <div t-if="not survey_form_readonly" 
                    class="date-field border"
                    onclick="const input = this.parentElement.querySelector('input'); input.focus(); input.click();">
                    <i class="fa fa-calendar"></i>
                </div>
            </div>
        </template>


        <template id="survey.question_datetime" name="Question: datetime box">
            <style>
                .form-control {
                    margin-bottom: 1rem;
                    padding: 0.75rem;
                    font-size: 1rem;
                }
                .date-field {
                    max-width: 3rem;
                    margin-bottom: 1rem;
                    padding: 0.75rem;
                    font-size: 1rem;
                    border-top-right-radius: 5px;
                    border-bottom-right-radius: 5px;
                    cursor: pointer;
                }
            </style>
            <div class="input-group o_survey_form_date o_survey_answer_wrapper p-1 rounded">
                <input type="text" class="form-control datetimepicker-input"
                    t-att-name="question.id"
                    t-att-placeholder="question.question_placeholder"
                    t-att-value="format_datetime(answer_lines[0].value_datetime) if answer_lines else None"
                    t-att-data-question-type="question.question_type"
                    data-widget="datetime-picker" data-widget-type="datetime"
                    t-att-data-min-date="question.validation_min_datetime"
                    t-att-data-max-date="question.validation_max_datetime" />
                <div t-if="not survey_form_readonly"
                    class="date-field border"
                    onclick="const input = this.parentElement.querySelector('input'); input.focus(); input.click();">
                    <i class="fa fa-calendar"></i>
                </div>
            </div>
        </template>

        <template id="survey.question_simple_choice" name="Question: simple choice">
            <style>
                .option-con{
                    margin-left: 4rem;
                    margin-right: 4rem;
                }

                @media (max-width: 576px) {
                    .option-con{
                        margin-left: 1rem;
                        margin-right: 1rem;
                    }
                }
            </style>
            <t t-set="answer_line" t-value="answer_lines.filtered(lambda line: line.suggested_answer_id)"/>
            <t t-set="comment_line" t-value="answer_lines.filtered(lambda line: line.value_char_box)"/>
            <div class="option-con row g-2 o_survey_answer_wrapper o_survey_form_choice"
                t-att-data-name="question.id"
                t-att-data-is-skipped-question="is_skipped_question or None"
                data-question-type="simple_choice_radio">
                <t t-set="item_idx" t-value="0"/>
                <t t-set="has_correct_answer" t-value="scoring_display_correction and any(label.is_correct for label in question.suggested_answer_ids)"/>
                <t t-foreach='question.suggested_answer_ids' t-as='label'>
                    <t t-set="item_idx" t-value="label_index"/>
                    <t t-set="answer_selected" t-value="answer_line and answer_line.suggested_answer_id.id == label.id"/>

                    <!--Used for print mode with corrections -->
                    <t t-set="answer_class" t-value="'' if not has_correct_answer else 'bg-success' if label.is_correct else 'bg-danger'"/>

                    <div t-attf-class="col-sm-12 #{use_half_col_lg}">
                        <label t-att-for="str(question.id) + '_' + str(label.id)"
                            t-attf-class="o_survey_choice_btn py-2 px-3 w-100 h-100 rounded #{answer_class} #{'o_survey_selected' if answer_selected else ''}">
                            
                            <t t-if="has_correct_answer and answer_selected">
                                <!-- While displaying results: change icons to have a check mark for a right answer and a cross for a wrong one -->
                                <i t-if="label.is_correct" class="float-end mt-1 position-relative d-inline fa fa-check-circle"/>
                                <i t-else="" class="float-end mt-1 position-relative d-inline fa fa-times-circle"/>
                            </t>
                            <t t-else="">
                                <i class="fa fa-check-circle float-end mt-1 ms-1 position-relative"/>
                                <i class="fa fa-circle-thin float-end mt-1 ms-1 position-relative"/>
                            </t>
                            <input t-att-id="str(question.id) + '_' + str(label.id)" type="radio" t-att-value='label.id'
                                t-attf-class="o_survey_form_choice_item invisible position-absolute #{'o_survey_form_choice_item_selected' if answer_selected else ''}"
                                t-att-name='question.id'
                                t-att-checked="'checked' if answer_selected else None"
                                t-att-data-selection-key="letters[item_idx] if useKeySelection else ''"/>
                            <span class="ms-2 text-break" t-field='label.value'/>
                            <t t-call="survey.question_suggested_value_image"/>
                        </label>
                    </div>
                </t>
                <t t-if='question.comments_allowed and question.comment_count_as_answer'>
                    <div t-attf-class="col-sm-12 #{use_half_col_lg}">
                        <label t-attf-class="o_survey_choice_btn py-2 px-3 w-100 h-100 rounded #{'o_survey_selected' if comment_line else ''}">
                            <t t-set="item_idx" t-value="item_idx + 1"/>
        
                            <i class="fa fa-check-circle float-end mt-1 ms-1 position-relative"/>
                            <i class="fa fa-circle-thin float-end mt-1 ms-1 position-relative"/>
                            <input type="radio" class="o_survey_form_choice_item o_survey_js_form_other_comment invisible position-absolute" value="-1"
                                t-att-name='question.id'
                                t-att-checked="comment_line and 'checked' or None"
                                t-att-data-selection-key="letters[item_idx] if useKeySelection else ''"/>
                            <span class="ms-2" t-out="question.comments_message or default_comments_message" />
                        </label>
                    </div>
                    <div t-attf-class="o_survey_comment_container mt-3 py-0 px-1 #{'d-none' if not comment_line else ''}">
                        <textarea type="text" class="form-control o_survey_question_text_box bg-transparent rounded-0 p-0"
                            t-att-disabled="None if comment_line else 'disabled'"><t t-esc="comment_line.value_char_box if comment_line else ''"/></textarea>
                    </div>
                </t>
                <div t-if='question.comments_allowed and not question.comment_count_as_answer'
                    class="mb-2 o_survey_comment_container mt-3">
                    <textarea type="text" class="col form-control o_survey_comment o_survey_question_text_box bg-transparent rounded-0 p-0"
                        t-att-placeholder="question.comments_message or default_comments_message if not survey_form_readonly else ''"><t t-esc="comment_line.value_char_box if comment_line else ''"/></textarea>
                </div>
            </div>
        </template>

        <template id="survey.survey_selection_key">
            <div t-if="useKeySelection" t-att-class="'o_survey_choice_key bg-white rounded %s' % selection_key_class" style="margin-top:-5px;">
                <span class="text-primary text-center w-100 position-relative" t-esc="letters[item_idx]"/>
            </div>
        </template>

        <template id="survey.question_multiple_choice" name="Question: multiple choice">
            <style>
                .option-con{
                    margin-left: 4rem;
                    margin-right: 4rem;
                }

                @media (max-width: 576px) {
                    .option-con{
                        margin-left: 1rem;
                        margin-right: 1rem;
                    }
                }
            </style>
            <t t-set="comment_line" t-value="answer_lines.filtered(lambda line: line.value_char_box)"/>
            <div class="option-con row g-2 o_survey_answer_wrapper o_survey_form_choice o_survey_question_multiple_choice"
                t-att-data-name="question.id"
                t-att-data-question-type="question.question_type">
                <t t-set="item_idx" t-value="0"/>
                <t t-set="has_correct_answer" t-value="scoring_display_correction and any(label.is_correct for label in question.suggested_answer_ids)"/>
                <t t-foreach='question.suggested_answer_ids' t-as='label'>
                    <t t-set="item_idx" t-value="label_index"/>
                    <t t-set="answer_line" t-value="answer_lines.filtered(lambda line: line.suggested_answer_id == label)"/>
                    <t t-set="answer_selected" t-value="answer_line and answer_line.suggested_answer_id.id == label.id"/>

                    <!--Used for print mode with corrections -->
                    <t t-set="answer_class" t-value="'' if not has_correct_answer else 'bg-success' if label.is_correct else 'bg-danger'"/>

                    <div t-attf-class="col-sm-12 #{use_half_col_lg}">
                        <label t-attf-class="o_survey_choice_btn py-2 px-3 w-100 h-100 rounded #{answer_class} #{'o_survey_selected' if answer_selected else ''}">
                            
                            <!-- While displaying results: change icons to have a check mark for a right answer and a cross for a wrong one -->
                            <i t-if="has_correct_answer and answer_selected" t-attf-class="float-end mt-1 position-relative d-inline
                                fa #{'fa-check-square' if is_correct else 'fa-times-square'}"/>
                            <t t-else="">
                                <i class="fa fa-check-square float-end mt-1 ms-1 position-relative"/>
                                <i class="fa fa-square-o float-end mt-1 ms-1 position-relative"/>
                            </t>
                            <input type="checkbox" t-att-value='label.id' class="o_survey_form_choice_item invisible position-absolute"
                                t-att-name="question.id"
                                t-att-checked="'checked' if answer_line else None"
                                t-att-data-selection-key="letters[item_idx] if useKeySelection else ''"/>
                            <span class="ms-2 text-break" t-field='label.value'/>
                            <t t-call="survey.question_suggested_value_image"/>
                        </label>
                    </div>
                </t>
                <t t-if='question.comments_allowed and question.comment_count_as_answer'>
                    <div t-attf-class="col-sm-12 #{use_half_col_lg}">
                        <label t-attf-class="o_survey_choice_btn py-2 px-3 h-100 w-100 rounded #{'o_survey_selected' if comment_line else ''}">
                            <t t-set="item_idx" t-value="item_idx + 1"/>
                            
                            <i class="fa fa-check-square float-end mt-1 ms-1 position-relative"/>
                            <i class="fa fa-square-o float-end mt-1 ms-1 position-relative"/>
                            <input type="checkbox" class="o_survey_form_choice_item o_survey_js_form_other_comment invisible position-absolute" value="-1"
                                t-att-name="question.id"
                                t-att-checked="comment_line and 'checked' or None"
                                t-att-data-selection-key="letters[item_idx] if useKeySelection else ''"/>
                            <span class="ms-2" t-out="question.comments_message or default_comments_message" />
                        </label>
                    </div>
                    <div t-attf-class="o_survey_comment_container mt-3 py-0 px-1 #{'d-none' if not comment_line else ''}">
                        <textarea type="text" class="form-control o_survey_question_text_box bg-transparent rounded-0 p-0"
                            t-att-disabled="None if comment_line else 'disabled'"><t t-esc="comment_line.value_char_box if comment_line else ''"/></textarea>
                    </div>
                </t>
                <div t-if='question.comments_allowed and not question.comment_count_as_answer' class="mb-2 o_survey_comment_container mt-3">
                    <textarea type="text" class="col form-control o_survey_comment o_survey_question_text_box bg-transparent rounded-0 p-0"
                        t-att-placeholder="question.comments_message or default_comments_message if not survey_form_readonly else ''"><t t-esc="comment_line.value_char_box if comment_line else ''"/></textarea>
                </div>
            </div>
        </template>

        <template id="survey.question_matrix" name="Question: matrix">
            <style>
                .survey-matrix-wrapper {
                    max-width: 450px;
                    overflow-x: auto;
                }
            </style>
            <t t-set="comment_line" t-value="answer_lines.filtered(lambda line: line.value_char_box)"/>
            <div style="max-width: 450px;">
            <table class="table table-borderless o_survey_question_matrix text-white text-center mb-0"
                t-att-data-name="question.id"
                t-att-data-question-type="question.question_type"
                t-att-data-sub-questions="question.matrix_row_ids.ids"
                style="width: 100%; table-layout: fixed; word-wrap: break-word;">
                <thead>
                    <tr>
                        <th style="width: 100px; word-wrap: break-word;"> </th>
                        <th class="fw-normal text-white" t-foreach="question.suggested_answer_ids" t-as="col_label"
                            style="word-wrap: break-word;">
                            <span t-field="col_label.value"/>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <t t-set="item_idx" t-value="0"/>
                    <!-- For matrix, we have an extra check because we have rows * columns total options -->
                    <t t-set="useKeySelection" t-value="useKeySelection and (len(question.suggested_answer_ids) * len(question.matrix_row_ids)) &lt; len(letters)" />
                    <tr class="bg-white text-white" t-foreach="question.matrix_row_ids" t-as="row_label" t-att-id="row_label.id">
                        <th class="fw-normal text-start text-white"><span t-field="row_label.value" /></th>
                        <t t-foreach="question.suggested_answer_ids" t-as="col_label">
                            <t t-set="answer" t-value="answer_lines.filtered(lambda line: line.suggested_answer_id == col_label and line.matrix_row_id == row_label)"/>
                            <td t-att-class="'o_survey_matrix_btn text-primary position-relative %s'
                            % ('o_survey_selected' if answer else '')">
                                <input t-att-type="'checkbox' if question.matrix_subtype == 'multiple' else 'radio'"
                                    t-att-name="'%s_%s' % (question.id, row_label.id)" t-att-value='col_label.id'
                                    t-att-checked="'checked' if answer else None"
                                    t-att-data-row-id="row_label.id"
                                    t-att-data-selection-key="letters[item_idx] if useKeySelection else ''"
                                    class="o_survey_form_choice_item d-none"/>
                                <i t-att-class="'o_survey_matrix_empty_checkbox fa fa-%s position-relative'
                                % ('square-o' if question.matrix_subtype == 'multiple' else 'circle-thin')"></i>
                                <i t-att-class="'fa fa-%s position-relative'
                                % ('check-square' if question.matrix_subtype == 'multiple' else 'check-circle')"></i>
                                <!-- <t t-call="survey.survey_selection_key">
                                    <t t-set="selection_key_class"
                                    t-value="'position-absolute float-end fw-bold %s' % ('o_survey_radio_btn' if question.matrix_subtype != 'multiple' else '')"/>
                                </t> -->
                                <t t-set="item_idx" t-value="item_idx + 1"/>
                            </td>
                        </t>
                    </tr>
                </tbody>
            </table>
            </div>
            <div t-if='question.comments_allowed'>
                <textarea type="text" class="form-control o_survey_question_text_box o_survey_comment bg-transparent rounded-0 p-0 mt-3"
                        t-att-placeholder="question.comments_message or default_comments_message if not survey_form_readonly else ''"
                        t-att-name="'%s_%s' % (question.id, 'comment')"><t t-esc="comment_line.value_char_box if comment_line else ''"/></textarea>
            </div>
        </template>

        <template id="survey.question_container" name="Survey: question container">
            <t t-set="display_question"
            t-value="survey.questions_layout == 'page_per_question'
                        or survey.questions_selection == 'random'
                        or (survey.questions_layout == 'one_page' and not question.triggering_answer_ids)
                        or (survey.questions_layout == 'page_per_section' and (not question.triggering_answer_ids
                            or any(triggering_answer in selected_answers for triggering_answer in triggering_answers_by_question[question.id])))"/>

            <t t-set="answer_lines" t-value="answer.user_input_line_ids.filtered(lambda line: line.question_id == question)"/>
            <t t-set="answers_contain_image" t-value="any(a.value_image for a in question.suggested_answer_ids)"/>
            <t t-set="use_half_columns" t-value="survey.questions_layout == 'page_per_question' and answers_contain_image"/>
            <t t-set="use_half_col_lg" t-value="'col-lg-6' if (use_half_columns and not survey_form_readonly) or (answer.is_session_answer and answers_contain_image) else ''"/>
            <!--Use Key selection if number of choices is < 26 to keep Z for other choice if any-->
            <t t-set="letters" t-value="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>
            <t t-set="useKeySelection" t-value="len(question.suggested_answer_ids) &lt; len(letters) and survey.questions_layout == 'page_per_question'"/>
            <!-- Extra 'right' margin is added on layouts that are not "page_per_question" to align with choices questions, since all choices have a me-2 class (pixel perfect yay...) -->
            <t t-set="extra_right_margin" t-value="survey.questions_layout != 'page_per_question' and question.question_type not in ['simple_choice', 'multiple_choice']"/>
            <t t-set="default_constr_error_msg">This question requires an answer.</t>
            <t t-set="default_validation_error_msg">The answer you entered is not valid.</t>
            <t t-set="default_comments_message">If other, please specify:</t>
            <t t-set="is_skipped_question" t-value="skipped_questions and question in skipped_questions"/>
            <!-- <div t-if="question.is_repeat_question" class="float-end">
                <button type="button" class="btn btn-secondary add-more-surgery-btn" id="add-more-surgery" t-att-data-question-id="question.id">Add More</button>
            </div> -->
            <div t-attf-class="js_question-wrapper
                            #{'d-none' if not display_question else ''}
                            #{'me-2' if extra_right_margin else ''}"
                t-att-id="question.id"
                t-att-style="'background-color: %s' % question.colour if question.colour else ''"
                t-att-data-required="bool(question.constr_mandatory and (not survey.users_can_go_back or survey.questions_layout == 'one_page')) or None"
                t-att-data-constr-error-msg="question.constr_error_msg or default_constr_error_msg if question.constr_mandatory else None"
                t-att-data-validation-error-msg="question.validation_error_msg or default_validation_error_msg if question.validation_required else None">
                <div class="mb-5">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <span t-field='question.title' class="text-break" />
                            <span t-if="question.constr_mandatory" class="text-danger">*</span>
                        </div>
                        <div class="d-flex align-items-center gap-2">
                            <span t-if="question.set_sequence > 1" class="badge bg-secondary">
                                <t t-esc="question.suffix"/> <span>#</span><t t-esc="question.set_sequence"/>
                            </span>
                            <button t-if="question.is_repeat_question and not answer.test_entry" type="button" class="btn btn-secondary add-more-surgery-btn"
                                    id="add-more-surgery" t-att-data-question-id="question.id">
                                Add More
                            </button>
                            <button t-if="question.is_header" type="button" class="btn btn-outline-danger js_delete-question js_del-question"
                                    t-att-data-question-id="question.id" t-att-data-question-length="question.length">
                                <i class="fa fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div t-if="not is_html_empty(question.description)" t-field='question.description' class="text-muted oe_no_empty mt-1 text-break"/>
                </div>
                <t t-if="question.question_type == 'text_box'" t-call="survey.question_text_box"/>
                <t t-if="question.question_type == 'char_box'" t-call="survey.question_char_box"/>
                <t t-if="question.question_type == 'numerical_box'" t-call="survey.question_numerical_box"/>
                <t t-if="question.question_type == 'date'" t-call="survey.question_date"/>
                <t t-if="question.question_type == 'datetime'" t-call="survey.question_datetime"/>
                <t t-if="question.question_type == 'simple_choice'" t-call="survey.question_simple_choice"/>
                <t t-if="question.question_type == 'multiple_choice'" t-call="survey.question_multiple_choice"/>
                <t t-if="question.question_type == 'matrix'" t-call="survey.question_matrix"/>
                <div t-attf-class="o_survey_question_error d-flex align-items-center justify-content-between overflow-hidden
                    border-0 py-0 px-1 px-md-3 alert alert-danger #{'slide_in' if is_skipped_question else ''}" role="alert">
                    <span t-if="is_skipped_question" t-out="question.constr_error_msg or default_constr_error_msg"/>
                </div>
            </div><br/>
        </template>


        <!-- Survey Container  -->
        <template id="survey.survey_fill_form_in_progress" name="Survey: form with questions">
            <meta charset="UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
            <style>
                .con-body {
                    background-color: #d1e4e6;
                    min-height: 100vh;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                }
                .main-card {
                    background-color: white;
                    border-radius: 0.75rem;
                    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
                    padding: 2rem;
                    width: 100%;
                    max-width: 450px;
                    margin: 1rem auto;
                    margin-top: 130px; 
                }
                .logo-container {
                    flex-grow: 1;
                    display: flex;
                    justify-content: center;
                    }
                .back-btn {
                    background-color: lightgrey;
                    border-radius: 3px;
                }
                .back-btn:hover {
                    color:rgb(1, 207, 207);
                }
                .card-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                }
                .action-btn {
                    width: 100%;
                    background-color: #25b7d3;
                    color: white;
                    border: none;
                    padding: 0.75rem;
                    padding-left: 2rem;
                    padding-right:2rem;
                    border-radius: 0.375rem;
                    transition: background-color 0.2s;
                    font-weight: 500;
                }
                .action-btn:hover {
                    background-color: #1da1bb;
                }
                .continue-btn {
                    width: 100%;
                    background-color:rgb(104, 104, 104);
                    color: white;
                    border: none;
                    padding: 0.75rem;
                    border-radius: 0.375rem;
                    transition: background-color 0.2s;
                    font-weight: 500;
                }
                .continue-btn:hover {
                    background-color:rgb(77, 77, 77);
                }
                .survey-navigation {
                    display: flex;
                    justify-content: space-between;
                    padding: 0 2rem;
                }
                .faq-link {
                    text-align: right;
                    font-size: 0.875rem;
                    }
                    .faq-link a {
                    color: #25b7d3;
                    text-decoration: none;
                    }
                    .faq-link a:hover {
                    color: #1da1bb;
                    }
                .footer {
                    text-align: center;
                    padding: 1rem;
                    color: #9ca3af;
                    font-size: 0.75rem;
                    margin-top: 1rem;
                }
            </style>

            <div class="o_survey_form_content_data d-none"
                t-att-data-question-time-limit-reached="answer.question_time_limit_reached"
                t-att-data-has-answered="bool(has_answered)"
                t-att-data-is-page-description="bool(question and question.is_page and not is_html_empty(question.description))"
                t-att-data-server-time="server_time"
                t-att-data-timer="timer_start"
                t-att-data-time-limit-minutes="time_limit_minutes"/>
            <t t-if="survey.questions_layout == 'one_page'">
                <t t-foreach='survey.question_and_page_ids' t-as='question'>
                    <h2 t-if="question.is_page" t-field='question.title' class="o_survey_title pb16 text-break"/>
                    <div t-if="question.is_page" t-field='question.description' class="text-break"/>
                    <t t-if="not question.is_page and question in answer.predefined_question_ids" t-call="survey.question_container"/>
                </t>
                <div class="text-center">
                    <button type="submit" value="finish" class="btn btn-secondary disabled">Submit</button>
                    <button id="next_page" t-attf-class="btn #{'btn-secondary' if survey_last else 'btn-primary'} d-none">Next</button>
                    <span class="fw-bold text-muted ms-2 d-none d-md-inline">
                        <span id="enter-tooltip">or press CTRL+Enter</span>
                    </span>
                </div>
            </t>
            <t t-if="survey.questions_layout == 'page_per_section'">
                <h2 t-field='page.title' class="o_survey_title pb16 text-break" />
                <div t-field='page.description' class="oe_no_empty text-break"/>
                <input type="hidden" name="page_id" t-att-value="page.id" />
                <t t-foreach='page.question_ids' t-as='question'>
                    <t t-if="question in answer.predefined_question_ids" t-call="survey.question_container"/>
                </t>
                <div class="row">
                    <div class="col-12 text-center mt16">
                        <t t-set="submit_value" t-value="'finish' if survey_last or answer.is_session_answer else 'next_skipped'
                            if answer.survey_first_submitted and skipped_questions.page_id and page in skipped_questions.page_id else 'next'"/>
                        <button type="submit" t-att-value="submit_value" t-attf-class="btn #{'btn-secondary' if survey_last else 'btn-primary'} disabled">
                            <t t-if="submit_value == 'finish'">Submit</t>
                            <t t-elif="submit_value == 'next_skipped'">Next Skipped</t>
                            <t t-else="">Continue</t>
                        </button>
                        <button id="next_page" t-attf-class="btn #{'btn-secondary' if survey_last else 'btn-primary'} d-none">Next</button>
                        <span class="fw-bold text-muted ms-2 d-none d-md-inline" id="enter-tooltip"> or press CTRL+Enter</span>
                    </div>
                </div>
            </t>
            <!-- Minimized display means we display the choices vertically (instead of optimized based on screen space).
            An exception is made for options with images, where we always want to optimize screen space.-->
            <t t-set="minimized_display" t-value="survey.questions_layout == 'page_per_question' and not any(suggestion.value_image for suggestion in question.suggested_answer_ids)" />
            <div t-if="survey.questions_layout == 'page_per_question'"
                t-attf-class="o_survey_page_per_question">
                <input type="hidden" name="question_id" t-att-value="question.id" />
                <!-- User has already answered for this session -->
                <t t-if="answer.is_session_answer and (has_answered or answer.question_time_limit_reached)">
                    <div t-if="answer.question_time_limit_reached and not has_answered" class="fw-bold">Sorry, you have not been fast enough.</div>
                    <div t-else="" class="fw-bold">We have registered your answer! Please wait for the host to go to the next question.</div>
                    <fieldset disabled="disabled">
                        <t t-set="survey_form_readonly" t-value="True" />
                        <div class="mt-5">
                            <t t-call="survey.question_container" />
                        </div>
                    </fieldset>
                </t>
                <t t-elif="answer.is_session_answer and question.is_page and not is_html_empty(question.description)">
                    <div class="fw-bold mt-5">Pay attention to the host screen until the next question.</div>
                </t>
                <t t-else="">
                    <div class="con-body">
                        <div class="container">
                            <div class="mb-5" style="margin-top: -10rem;">
                                
                                <!-- <t t-set="height_questions" t-value="survey.bio_ques_and_page_ids.filtered(lambda q: q.question_tag == 'height') if survey.is_height_ques_enabled else request.env['survey.question']"/>
                                <t t-set="weight_questions" t-value="survey.bio_ques_and_page_ids.filtered(lambda q: q.question_tag == 'weight') if survey.is_weight_ques_enabled else request.env['survey.question']"/>
                                <t t-set="patient_questions" t-value="survey.patient_ques_and_page_ids or request.env['survey.question']"/>
                                <t t-set="surgic_questions" t-value="survey.surgic_ques_and_page_ids if survey.is_surgery_ques_enabled else request.env['survey.question']"/>
                                <t t-set="medic_questions" t-value="survey.medic_ques_and_page_ids if survey.is_medic_ques_enabled else request.env['survey.question']"/>
                                <t t-set="add_more_questions" t-value="survey.question_and_page_ids.filtered(lambda q: q.answer_id == answer.id and q.repeat_survey_id == survey.id) if survey.is_surgery_ques_enabled or medic_ques_and_page_ids  else request.env['survey.question']"/>

                                
                                <t t-set="question_list" t-value="list(height_questions | weight_questions | patient_questions | surgic_questions | medic_questions | add_more_questions)"/>

                                
                                <t t-set="height_question" t-value="len(height_questions)"/>
                                <t t-set="weight_question" t-value="len(weight_questions)"/>
                                <t t-set="patient_question" t-value="len(patient_questions)"/>
                                <t t-set="surgic_question" t-value="len(surgic_questions)"/>
                                <t t-set="medic_question" t-value="len(medic_questions)"/>
                                <t t-set="add_more_question" t-value="len(add_more_questions)"/>
                                <t t-set="total_question" t-value="height_question + weight_question + patient_question + surgic_question + medic_question + add_more_question"/>

                                
                                <t t-set="current_question_index" t-value="1"/>
                                <t t-if="question in question_list">
                                    <t t-set="current_question_index" t-value="question_list.index(question) + 1"/>
                                </t>
                                <t t-else="">
                                    
                                    <t t-set="current_question_index" t-value="total_question"/>
                                </t>
                                
                                <t t-set="percentage" t-value="min(100, round(100 * (current_question_index / total_question))) if total_question > 0 else 0"/> -->
                                <t t-set="height_questions" t-value="survey.bio_ques_and_page_ids.filtered(lambda q: q.title == 'Height') if survey.is_height_ques_enabled else request.env['survey.question']"/>
                                <t t-set="weight_questions" t-value="survey.bio_ques_and_page_ids.filtered(lambda q: q.title == 'Weight') if survey.is_weight_ques_enabled else request.env['survey.question']"/>
                                <t t-set="patient_questions" t-value="survey.patient_ques_and_page_ids or request.env['survey.question']"/>
                                <t t-set="surgic_questions" t-value="survey.surgic_ques_and_page_ids if survey.is_surgery_ques_enabled else request.env['survey.question']"/>
                                <t t-set="medic_questions" t-value="survey.medic_ques_and_page_ids if survey.is_medic_ques_enabled else request.env['survey.question']"/>

                                <!-- Get dynamic questions from more_ques_and_page_ids for all pages -->
                                <t t-set="all_pages" t-value="survey.page_ids"/>
                                <t t-set="dynamic_questions" t-value="request.env['survey.question']"/>
                                <t t-foreach="all_pages" t-as="page">
                                    <t t-set="dynamic_questions" t-value="dynamic_questions | page.more_ques_and_page_ids"/>
                                </t>

                                <!-- Also get repeat questions that are currently active -->
                                <t t-set="repeat_questions" t-value="request.env['survey.question'].sudo().search([('repeat_survey_id', '=', survey.id), ('repeat_answer_id', '=', answer.id if answer else 0)])"/>

                                <!-- Combine all questions including dynamic and repeat questions -->
                                <t t-set="base_questions" t-value="height_questions | weight_questions | patient_questions | surgic_questions | medic_questions"/>
                                <t t-set="all_active_questions" t-value="base_questions | dynamic_questions | repeat_questions"/>
                                <t t-set="question_list" t-value="list(all_active_questions)"/>

                                <!-- Count questions -->
                                <t t-set="height_question" t-value="len(height_questions)"/>
                                <t t-set="weight_question" t-value="len(weight_questions)"/>
                                <t t-set="patient_question" t-value="len(patient_questions)"/>
                                <t t-set="surgic_question" t-value="len(surgic_questions)"/>
                                <t t-set="medic_question" t-value="len(medic_questions)"/>
                                <t t-set="dynamic_question_count" t-value="len(dynamic_questions)"/>
                                <t t-set="repeat_question_count" t-value="len(repeat_questions)"/>

                                <!-- Calculate total including all dynamic questions -->
                                <t t-set="base_total" t-value="height_question + weight_question + patient_question + surgic_question + medic_question"/>
                                <t t-set="total_question" t-value="base_total + dynamic_question_count + repeat_question_count"/>

                                <!-- FIXED SECTION: Calculate answered questions instead of current position -->
                                <t t-set="answered_questions" t-value="answer.user_input_line_ids.mapped('question_id') if answer else request.env['survey.question']"/>
                                <t t-set="answered_count" t-value="len(answered_questions)"/>

                                <!-- Alternative method: Calculate progress based on answered vs total -->
                                <t t-set="progress_by_answered" t-value="min(100, round(100 * (answered_count / total_question))) if total_question > 0 else 0"/>

                                <!-- Get current question index (for display purposes) -->
                                <t t-set="current_question_index" t-value="1"/>

                                <!-- Check current question position -->
                                <t t-if="question in question_list">
                                    <t t-set="current_question_index" t-value="question_list.index(question) + 1"/>
                                </t>
                                <t t-elif="question in base_questions">
                                    <!-- Original questions -->
                                    <t t-set="current_question_index" t-value="list(base_questions).index(question) + 1"/>
                                </t>
                                <t t-elif="question in dynamic_questions">
                                    <!-- Dynamic questions from "Add More" -->
                                    <t t-set="dynamic_index" t-value="list(dynamic_questions).index(question) + 1"/>
                                    <t t-set="current_question_index" t-value="base_total + dynamic_index"/>
                                </t>
                                <t t-elif="question in repeat_questions">
                                    <!-- Repeat questions -->
                                    <t t-set="repeat_index" t-value="list(repeat_questions).index(question) + 1"/>
                                    <t t-set="current_question_index" t-value="base_total + dynamic_question_count + repeat_index"/>
                                </t>
                                <t t-else="">
                                    <!-- Fallback: count answered questions -->
                                    <t t-set="current_question_index" t-value="answered_count + 1 if answered_count &lt; total_question else total_question"/>
                                </t>

                                <!-- MAIN FIX: Use answered-based progress instead of position-based -->
                                <!-- This prevents the progress bar from being full when on the last question -->
                                <t t-set="percentage" t-value="progress_by_answered"/>
                            </div>
                            <div class="row justify-content-center">
                                <div class="col-12">
                                    <div class="main-card">
                                        <div class="card-header">
                                            <div class="logo-container" t-if="answer.test_entry"> <h4 style="color: #504f4f;text-align:center;"> Test Questionnaire </h4> </div>
                                            <div class="logo-container" t-elif="survey.type_of_survey == 'medical_history'"> <h4 style="color: #504f4f;text-align:center;"> Pre-Anaesthetic Questionnaire </h4> </div>
                                            <div class="logo-container" t-elif="survey.type_of_survey == 'feedback'"> <h4 style="color: #504f4f;text-align:center;"> Post-Anaesthetic Feedback </h4> </div>
                                            <div class="logo-container" t-else=""> <h4 style="color: #504f4f;" t-esc="survey.title"/></div>
                                        </div>
                                        <div class="form-outline form-white mt-4">
                                            <!-- Survey Input box -->
                                            <t t-call="survey.question_container"/>
                                            <!-- Button -->
                                            <div class="d-flex justify-content-center flex-wrap gap-3 mt-3">
                                                <t t-set="submit_value" t-value="'finish' if survey_last or answer.is_session_answer else
                                                    'next_skipped' if answer.survey_first_submitted and skipped_questions and question in skipped_questions else 'next'"/>
                                                <button type="submit" t-att-value="submit_value" t-attf-class="action-btn btn btn-sm w-auto #{'btn-secondary' if survey_last else 'btn-primary'} disabled">
                                                    <t t-if="submit_value == 'finish'">Submit</t>
                                                    <t t-elif="submit_value == 'next_skipped'">Next Skipped</t>
                                                    <t t-else="">Continue</t>
                                                </button>
                                                <button id="next_page" t-attf-class="action-btn btn w-auto #{'btn-secondary' if survey_last else 'btn-primary'} d-none">Next</button>
                                                <t t-if="not answer.test_entry">
                                                    <button type="button" value="continue_later" class="continue_later continue-btn btn btn-sm btn-secondary w-auto">Continue Later</button>
                                                </t>
                                            </div>
                                        </div>
                                        <div class="survey-navigation mt-4 mb-2 d-flex justify-content-between">
                                            <button
                                                type="submit" class="btn p-0 o_survey_navigation_submit back-btn" name="button_submit" value="previous" t-att-data-previous-page-id="previous_page_id">
                                                <i class="oi oi-chevron-left p-2" />
                                            </button>
                                            <t t-set="can_go_forward"
                                                t-value="survey and survey.questions_layout in ['page_per_question', 'page_per_section'] and answer and answer.state != 'done' and not answer.is_session_answer"/>
                                            <button
                                                t-att-disabled="not can_go_forward"
                                                type="submit" class="btn p-0 o_survey_navigation_submit back-btn" t-att-value="'next' if not survey_last else 'finish'">
                                                <i class="oi oi-chevron-right p-2" />
                                            </button>
                                        </div>
                                        <div class="faq-link text-center mt-4">
                                            <a href="https://vanaesa.com/" target="_blank">What is VANAESA?</a>
                                        </div>
                                        <div class="text-center mt-3">
                                            <p>Progress</p>
                                        </div>
                                        <div class="o_survey_progress progress flex-grow-1 text-center">
                                            <div class="progress-bar bg-info" t-att-style="'width: ' + str(percentage) + '%'"/>
                                        </div>
                                    </div>
                                    <!-- Footer -->
                                    <div class="footer">
                                        Copyright Â© Synapse Medical Pte Ltd
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>        
                </t>
            </div>
            <!-- Bootstrap JS Bundle with Popper -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        </template>

        <template id="survey.survey_navigation" name="Survey: Navigation">
            <!-- <div class="d-inline-block">
            </div> -->
        </template>

        <template id="survey_custom_navigation_footer" inherit_id="survey.layout">
            <xpath expr="//div[@class='py-3 m-0 p-0 text-end']" position="replace">
                <div class="py-3 m-0 p-0 text-end" style="background-color: #d1e4e6;">
                    <!-- <div class="o_survey_brand_message float-end rounded me-3 border">
                        <div class="px-2 py-2 d-inline-block" t-call="web.brand_promotion_message">
                            <t t-set="_message"></t>
                            <t t-set="_utm_medium" t-valuef="survey"/>
                        </div>
                        <div class="o_survey_navigation_wrapper d-inline-block d-print-none" t-call="survey.survey_navigation">
                        </div>
                    </div> -->
                </div>
            </xpath>
        </template>

    </data>
</odoo>